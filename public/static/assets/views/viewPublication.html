<div ng-show="!publication.$isReady" class="container" style="margin-top: 17px;">
  <div class="panel panel-default uk-flag-background" style="height: 600px;" cg-busy="{promise: httpRequestPromise, message:'Just a moment'}">
    <div class="panel-body">
    </div>
  </div>
</div>

<div ng-show="publication.$isReady">
  <div style="margin-bottom: 20px; border-bottom: 1px solid #959595; background: #000;">
    <div uib-carousel interval="5000" no-wrap="false" active="">
      <div uib-slide ng-repeat="image in publication.$images track by $index" index="$index">

        <picture>
          <source type="image/webp" ng-srcset="http://res.cloudinary.com/berlin/image/upload/c_fill,h_700,q_auto:best,w_1200/{{image.$id}}.webp">
          <img ng-src="http://res.cloudinary.com/berlin/image/upload/c_fill,h_700,q_auto:best,w_1200/{{image.$id}}.jpg" class="img-responsive" style="margin:auto;">
        </picture>

      </div>
    </div>
  </div>

  <div class="container">
    <div class="panel panel-default ribbonBox">
      <div ng-show="publication.data.department === 'Real Estate' && publication.data.reHomeStatus === 'New'" class="ribbon"><span>NEW HOME</span></div>
      <div class="panel-body">

        <div>
          <h3 class="panel-title" style="font-size: 25px; font-family: 'Lato', sans-serif;">
            <div>
              {{publication.data.title | capitalizeFirstChar}}
              <span ng-show="publication.data.department === 'Real Estate'"> for {{publication.data.reHomeFor | uppercase}}</span>
            </div>
          </h3>

          <div class="non-printable" style="font-family: 'Lato', sans-serif;">
            Publication by <a href="/{{profile.accountName !== undefined ? profile.accountName : profile.$id }}"> {{profile.pseudonym === undefined || profile.pseudonym === '' ? profile.names : profile.pseudonym}} </a>
          </div>
        </div>

        <hr class="hr-xs">

        <div>
          <h4 ng-if="publication.data.department !== 'Services' && publication.data.department !== 'Jobs'" style="font-family: 'Lato', sans-serif;">
            Price:
            {{publication.data.price | currency : '£' : 2 }}
          </h4>


          <h5 ng-if="publication.data.department === 'Marketplace'" ><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Quantity in stock: {{publication.data.quantity}}</h5>
          <h4 ng-if="publication.data.department === 'Jobs'">
            Salary:
            {{publication.data.jobSalaryStartAt | currency : '£' : 2 }} - {{publication.data.jobSalaryEndAt | currency : '£' : 2 }}
            per {{publication.data.jobSalaryType == 'Annual' ? 'annum' : ''}}
            {{publication.data.jobSalaryType == 'Daily' ? 'day' : ''}}
            {{publication.data.jobSalaryType == 'Hourly' ? 'hour' : ''}}
            {{publication.data.jobHasBenefits ? '+ benefits' : ''}}
            {{publication.data.jobHasBonus ? '+ bonus' : ''}}
            (Estimated Monthly Salary {{publication.data.jobEstimatedMonthlySalary | currency : '£' : 2 }})
          </h4>
          <h5 ng-if="publication.data.department === 'Jobs'"><span class="glyphicon glyphicon-time" aria-hidden="true"></span> {{publication.data.jobType}}</h5>
          <h5 ng-if="publication.data.department === 'Jobs'"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> {{publication.data.jobRecruiterType}}</h5>
          <h5>
            <span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
            <span ng-repeat="location in publication.data.locations"> {{location | capitalizeFirstChar}}{{!$last ? ' • ' : ''}}</span>
          </h5>
          <h5>
            <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
            Published: {{publication.data.releaseDate | date:'dd'}}/{{publication.data.releaseDate | date:'MM'}}/{{publication.data.releaseDate | date:'yyyy'}}
          </h5>

          <!--<pre>{{profile | json}}</pre>-->
          <!--<pre>{{publication | json}}</pre>-->

        </div>


        <div>
          <hr class="hr-xs">
          <div style="padding-bottom: 15px;">
            <b>Description:</b>
          </div>

          <span ng-bind-html="publication.data.htmlDescription | imgResponsive | unsafe"></span>
        </div>
        <div ng-show="publication.data.department === 'Marketplace'">
          <hr class="hr-xs">
          <div style="padding-bottom: 15px;">
            <b>Warranty:</b>
          </div>

          <span ng-bind-html="publication.data.htmlWarranty | imgResponsive | unsafe"></span>
        </div>
        <!--<div>-->
          <!--<hr class="hr-xs">-->

          <!--<div style="padding-bottom: 15px;">-->
            <!--<b>Publication barcode:</b>-->
          <!--</div>-->
          <!--<barcode-img barcode-string="publication.$barcode.string" barcode-options="publication.$barcode.options" ></barcode-img>-->
        <!--</div>-->
        <div class="non-printable">
          <hr class="hr-xs">

          <div style="padding-bottom: 10px;">
            <b>Share on social networks:</b>
          </div>

          <div ng-if="publication.data.$id">
            <custom-twitter-share-button data-text="publication.data.title" data-url="'http://www.marketoflondon.co.uk/v/l/' + publication.data.$id + '/t'"></custom-twitter-share-button>
          </div>

          <div>
            <script>
              delete IN;
            </script>
            <script src="//platform.linkedin.com/in.js" type="text/javascript"> lang: en_US</script>
            <script type="IN/Share"></script>
          </div>

          <div>
            <facebook data-url="publication.$seo.url"></facebook>
          </div>



        </div>

      </div>
    </div>
  </div>
</div>

<div ng-if="publication.data.title !== undefined">
  <update-title title="{{publication.data.title | capitalize | trim}}{{publication.data.department === 'Real Estate'? ' for ' + (publication.data.reHomeFor | uppercase) : ''}} - MarketOfLondon.co.uk"></update-title>
</div>

