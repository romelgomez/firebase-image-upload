!function(){"use strict";function e(e,s){function n(n,t,r,i,o){function a(e){var s={};for(var t in u)n.options[t]===!0&&(s[t]=u.hasOwnProperty(t)?u[t](e):!1);return n.checklist=s,n.isAllValid=l(s),i.$setValidity("trustpass",n.isAllValid),e}function l(e){for(var s in e)if(e[s]===!1)return!1;return!0}n.isAllValid=!1,n.checklist={},n.options=angular.extend({lowercase:!0,uppercase:!0,number:!0,special:!0,minimum:!0,maximum:!1,word:!1,toggle:!1,minlength:8,maxlength:50,keepHeight:!1,messageGuide:"",lowercaseLabel:"One lowercase character",uppercaseLabel:"One uppercase character",numberLabel:"One number",specialLabel:"One special character",minimumLabel:"characters minimum",maximumLabel:"characters maximum",wordLabel:"Alphanumeric characters",messageDone:"Great! Your password is secure."},n.trTrustpass),(r.ngMaxlength||r.maxlength)&&(n.options.maxlength=r.ngMaxlength||r.maxlength),(r.ngMinlength||r.minlength)&&(n.options.minlength=r.ngMinlength||r.minlength);var u={word:function(e){return e&&/[\w]/.test(e)?!0:!1},lowercase:function(e){return e&&/[a-z]/.test(e)?!0:!1},uppercase:function(e){return e&&/[A-Z]/.test(e)?!0:!1},number:function(e){return e&&/\d/.test(e)?!0:!1},special:function(e){return e&&/[_\W]/.test(e)?!0:!1},minimum:function(e){return e&&e.length>=n.options.minlength?!0:!1},maximum:function(e){return e&&e.length<=n.options.maxlength?!0:!1}};i.$parsers.unshift(a),n.$watch("value",a),i.$render=function(){i.$viewValue&&t.val(i.$viewValue)},n.isVisible=!n.options.toggle,n.options.toggle&&(n.isVisible=!1,t.bind("focus",function(){n.isVisible=!0,n.$apply()}).bind("blur",function(){n.isVisible=!1,n.$apply()}));var p=angular.element('<section class="trustpass" ng-show="isVisible" ng-style="{height: (options.keepHeight ? initialHeight : \'auto\')}"><div class="trustpass-guide" ng-if="isVisible && !isAllValid && options.messageGuide" ng-bind="options.messageGuide"></div><ul class="trustpass-checklist" ng-show="isVisible && !isAllValid"><li ng-class="{ \'trustpass-nope\': !checklist.word,      \'trustpass-yep\': checklist.word      }" ng-if="options.word">{{ ::options.wordLabel }}</li><li ng-class="{ \'trustpass-nope\': !checklist.lowercase, \'trustpass-yep\': checklist.lowercase }" ng-if="options.lowercase">{{ ::options.lowercaseLabel }}</li><li ng-class="{ \'trustpass-nope\': !checklist.uppercase, \'trustpass-yep\': checklist.uppercase }" ng-if="options.uppercase">{{ ::options.uppercaseLabel }}</li><li ng-class="{ \'trustpass-nope\': !checklist.number,    \'trustpass-yep\': checklist.number    }" ng-if="options.number">{{ ::options.numberLabel }}</li><li ng-class="{ \'trustpass-nope\': !checklist.special,   \'trustpass-yep\': checklist.special   }" ng-if="options.special">{{ ::options.specialLabel }}</li><li ng-class="{ \'trustpass-nope\': !checklist.minimum,   \'trustpass-yep\': checklist.minimum   }" ng-if="options.minimum">{{ ::options.minlength }} {{ ::options.minimumLabel }}</li><li ng-class="{ \'trustpass-nope\': !checklist.maximum,   \'trustpass-yep\': checklist.maximum   }" ng-if="options.maximum">{{ ::options.maxlength }} {{ ::options.maximumLabel }}</li></ul><div class="trustpass-done" ng-show="isVisible && isAllValid" ng-bind="options.messageDone"></div></section>');t[0].parentNode.insertBefore(p[0],t[0].nextSibling),e(p)(n),n.options.keepHeight&&s(function(){n.initialHeight=t[0].nextSibling.clientHeight+"px"})}return{restrict:"A",require:"ngModel",scope:{value:"=ngModel",trTrustpass:"=trTrustpass"},link:n}}angular.module("trTrustpass",[]).directive("trTrustpass",e),e.$inject=["$compile","$timeout"]}(),function(){"use strict";angular.module("ngPasswordStrength",[]).directive("ngPasswordStrength",function(){return{template:'<div class="progress {{valueClass.outter}}"><div class="{{valueClass.inner}} {{innerClass}}" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( value + \'%\' ) }"><span class="sr-only">{{value}}%</span></div></div>',restrict:"A",scope:{pwd:"=ngPasswordStrength",value:"=strength",innerClassPrefix:"@?",outterClassPrefix:"@?",innerClass:"@?",mode:"=?"},link:function(e){var s={foundation:{innerClass:"meter"},bootstrap:{innerClass:"progress-bar",innerClassPrefix:"progress-bar-"}},n=function(e){var s,n,t,r,i=function(e){for(var s=e.length-1,n="";s>=0;n+=e[s--]);return n},o={pos:{},neg:{}},a={pos:{},neg:{seqLetter:0,seqNumber:0,seqSymbol:0}},l=0,u="abcdefghijklmnopqrstuvwxyz",p="01234567890",c="\\!@#$%&/()=?Â¿";if(e){for(o.pos.lower=e.match(/[a-z]/g),o.pos.upper=e.match(/[A-Z]/g),o.pos.numbers=e.match(/\d/g),o.pos.symbols=e.match(/[$-\/:-?{-~!^_`\[\]]/g),o.pos.middleNumber=e.slice(1,-1).match(/\d/g),o.pos.middleSymbol=e.slice(1,-1).match(/[$-\/:-?{-~!^_`\[\]]/g),a.pos.lower=o.pos.lower?o.pos.lower.length:0,a.pos.upper=o.pos.upper?o.pos.upper.length:0,a.pos.numbers=o.pos.numbers?o.pos.numbers.length:0,a.pos.symbols=o.pos.symbols?o.pos.symbols.length:0,s=_.reduce(a.pos,function(e,s){return e+Math.min(1,s)},0),a.pos.numChars=e.length,s+=a.pos.numChars>=8?1:0,a.pos.requirements=s>=3?s:0,a.pos.middleNumber=o.pos.middleNumber?o.pos.middleNumber.length:0,a.pos.middleSymbol=o.pos.middleSymbol?o.pos.middleSymbol.length:0,o.neg.consecLower=e.match(/(?=([a-z]{2}))/g),o.neg.consecUpper=e.match(/(?=([A-Z]{2}))/g),o.neg.consecNumbers=e.match(/(?=(\d{2}))/g),o.neg.onlyNumbers=e.match(/^[0-9]*$/g),o.neg.onlyLetters=e.match(/^([a-z]|[A-Z])*$/g),a.neg.consecLower=o.neg.consecLower?o.neg.consecLower.length:0,a.neg.consecUpper=o.neg.consecUpper?o.neg.consecUpper.length:0,a.neg.consecNumbers=o.neg.consecNumbers?o.neg.consecNumbers.length:0,r=0;r<u.length-2;r++){var m=e.toLowerCase();t=u.substring(r,parseInt(r+3)),n=i(t),(-1!==m.indexOf(t)||-1!==m.indexOf(n))&&a.neg.seqLetter++}for(r=0;r<p.length-2;r++)t=p.substring(r,parseInt(r+3)),n=i(t),(-1!==e.indexOf(t)||-1!==e.toLowerCase().indexOf(n))&&a.neg.seqNumber++;for(r=0;r<c.length-2;r++)t=c.substring(r,parseInt(r+3)),n=i(t),(-1!==e.indexOf(t)||-1!==e.toLowerCase().indexOf(n))&&a.neg.seqSymbol++;a.neg.repeated=_.chain(e.toLowerCase().split("")).countBy(function(e){return e}).reject(function(e){return 1===e}).reduce(function(e,s){return e+s},0).value(),l+=4*a.pos.numChars,a.pos.upper&&(l+=2*(a.pos.numChars-a.pos.upper)),a.pos.lower&&(l+=2*(a.pos.numChars-a.pos.lower)),(a.pos.upper||a.pos.lower)&&(l+=4*a.pos.numbers),l+=6*a.pos.symbols,l+=2*(a.pos.middleSymbol+a.pos.middleNumber),l+=2*a.pos.requirements,l-=2*a.neg.consecLower,l-=2*a.neg.consecUpper,l-=2*a.neg.consecNumbers,l-=3*a.neg.seqNumber,l-=3*a.neg.seqLetter,l-=3*a.neg.seqSymbol,o.neg.onlyNumbers&&(l-=a.pos.numChars),o.neg.onlyLetters&&(l-=a.pos.numChars),a.neg.repeated&&(l-=a.neg.repeated/a.pos.numChars*10)}return Math.max(0,Math.min(100,Math.round(l)))},t=function(s){switch(Math.round(s/33)){case 0:case 1:return{inner:e.outterClassPrefix+"danger",outter:e.innerClassPrefix+"alert"};case 2:return{outter:e.outterClassPrefix+"warning",inner:e.innerClassPrefix+"warning"};case 3:return{outter:e.outterClassPrefix+"success",inner:e.innerClassPrefix+"success"}}};e.innerClassPrefix=e.innerClassPrefix||"",e.outterClassPrefix=e.outterClassPrefix||"",e.$watch("mode",function(){angular.extend(e,s[e.mode]),e.valueClass=t(e.value)}),e.$watch("pwd",function(){e.value=n(e.pwd),e.valueClass=t(e.value)})}}})}();