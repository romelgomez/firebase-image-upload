<div class="container view-container"><div cg-busy="{promise: httpRequestPromise, message:'Just a moment'}"><!-- Loading Gif --><div class="panel panel-default loading-background" ng-show="!publication.isReady"><div class="panel-body"></div></div><!-- Category selection | Check below for the Category input --><div id="category-selection" class="panel panel-default" ng-show="publication.categorySelected === false && publication.isReady"><div class="panel-heading"><h3 class="panel-title" ng-switch="publication.inEditMode"><span ng-switch-when="false">New Publication - Select a category:</span> <span ng-switch-when="true">Edit Publication</span></h3></div><div class="list-group"><button type="button" class="list-group-item" ng-click="setCategory(category.$id)" ng-repeat="category in publication.categories | filter:{parentId: publication.model.categoryId}:true"><span class="glyphicon" ng-class="{'glyphicon-folder-close': (category.name !== 'Marketplace' && category.name !== 'Jobs' && category.name !== 'Real Estate' && category.name !== 'Transport' && category.name !== 'Services') , 'glyphicon-shopping-cart': (category.name === 'Marketplace') , 'glyphicon-briefcase': (category.name === 'Jobs'), 'glyphicon-home': (category.name === 'Real Estate'), 'glyphicon-plane': (category.name === 'Transport'), 'glyphicon-wrench' : (category.name === 'Services')}"></span> <span ng-bind="category.name | capitalizeFirstChar"></span></button></div><div class="panel-body"><ol ng-show="publication.categoryPath.length > 0" class="breadcrumb"><li ng-click="publication.model.categoryId = ''; publication.categoryPath =[];" class="a-link">Reset</li><li ng-repeat="category in publication.categoryPath" ng-click="setCategory(category.$id)" ng-class="{'a-link': !$last}"><span ng-bind="category.name | capitalizeFirstChar"></span></li></ol><div ng-show="publication.redefineCategory === true" class="alert alert-danger alert-xs" role="alert"><b>NOTE: Sorry, but we need to redefine the category.</b></div><div class="alert alert-info alert-xs" role="alert">NOTE: Select the category that best suits to the publication. No matter if it is too general or specific, the important thing is to select one.</div></div><div class="panel-footer"><button ng-click="publication.categorySelected = true; publication.redefineCategory = false" type="button" class="btn btn-primary" ng-disabled="publication.model.categoryId ===''"><span class="glyphicon glyphicon glyphicon-ok"></span> Confirm selection</button></div></div><!-- New or Edit publication panel --><div class="panel panel-default" ng-show="publication.categorySelected && publication.isReady"><div class="panel-heading"><h3 class="panel-title" ng-switch="publication.inEditMode"><span ng-switch-when="false">New Publication</span> <span ng-switch-when="true">Edit Publication</span></h3></div><div class="panel-body"><!-- Category selected --><ol class="breadcrumb"><li ng-repeat="category in publication.categoryPath"><span ng-bind="category.name | capitalizeFirstChar"></span></li></ol><form name="publicationForm" novalidate="" ng-submit="submit()"><!-- Control buttons --><div><div class="hidden-xs hidden-sm"><button ng-click="publication.categorySelected = false; publication.model.categoryId =''; publication.categoryPath =[];" type="button" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit category</button> <button ng-switch="publication.$id !== '';" class="btn btn-primary" type="submit"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> <span ng-switch-when="true">Update</span> <span ng-switch-when="false">Publish</span></button> <button ng-click="discard()" ng-switch="publication.$id !== '';" class="btn btn-warning" ng-class="{'btn-danger': publication.$id !== ''}" type="button"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> <span ng-switch-when="true">Delete</span> <span ng-switch-when="false">Discard</span></button></div><div class="hidden-md hidden-lg"><div style="margin-bottom: 10px"><button ng-click="publication.categorySelected = false; publication.model.categoryId =''; publication.categoryPath =[];" type="button" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit category</button></div><div style="margin-bottom: 10px"><button ng-switch="publication.$id !== '';" class="btn btn-primary" type="submit"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> <span ng-switch-when="true">Update</span> <span ng-switch-when="false">Publish</span></button></div><div><button ng-click="discard()" ng-switch="publication.$id !== '';" class="btn btn-warning" ng-class="{'btn-danger': publication.$id !== ''}" type="button"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> <span ng-switch-when="true">Delete</span> <span ng-switch-when="false">Discard</span></button></div></div></div><!-- Category "hidden" input, its purpose is display an error message if the category is not defined --><div><input name="category" ng-model="publication.model.categoryId" required class="form-control" placeholder="" type="text" style="display: none"><div data-ng-messages="publicationForm.$submitted && publicationForm.category.$error" class="help-block"><div data-ng-message="required">- The <b>Category</b> is required.</div></div></div><hr><!-- Form inputs --><div><!-- Title input --><div class="form-group"><label class="control-label"><span class="glyphicon glyphicon-bookmark"></span> Title <sup class="required">*</sup></label><input type="text" name="title" ng-model="publication.model.title" required minlength="7" capitalize-first-char class="form-control" placeholder=""><div data-ng-messages="publicationForm.$submitted && publicationForm.title.$error" class="help-block"><div data-ng-message="required">- The <b>title</b> is required.</div><div data-ng-message="minlength">- The <b>title</b> must be at least 7 characters long.</div></div></div><!-- Description input --><div class="form-group"><label class="control-label"><span class="glyphicon glyphicon-book"></span> Description <sup class="required">*</sup></label><textarea redactor name="htmlDescription" data-ng-model="publication.model.htmlDescription" required class="form-control" placeholder=""></textarea><div data-ng-messages="publicationForm.$submitted && publicationForm.htmlDescription.$error" class="help-block"><div data-ng-message="required">- The <b>description</b> is required.</div></div></div><!-- Price input - only if the publications type is: ['Marketplace','Real Estate', 'Transport']  --><div class="form-group" ng-if="publication.model.department === 'Marketplace' || publication.model.department === 'Real Estate' || publication.model.department === 'Transport'"><div class="row"><div class="col-xs-12 col-sm-12 col-md-5"><label class="control-label"><span class="glyphicon glyphicon-tag"></span> Price <sup class="required">*</sup></label><div class="input-group"><div class="input-group-addon">Â£</div><input name="price" ng-model="publication.model.price" required class="form-control" placeholder="Eje: 1000" type="number"></div><div data-ng-messages="publicationForm.$submitted && publicationForm.price.$error" class="help-block"><div data-ng-message="required">- The <b>price</b> is required.</div></div></div></div></div><!-- Price input - only if the publications type is: ['Marketplace']  --><div class="form-group" ng-if="publication.model.department === 'Marketplace'"><div class="row"><div class="col-xs-12 col-sm-12 col-md-5"><label class="control-label"><span class="glyphicon glyphicon-th"></span> Quantity in stock <sup class="required">*</sup></label><div class="input-group"><div class="input-group-addon">Units</div><input name="quantity" ng-model="publication.model.quantity" required class="form-control" placeholder="Eje: 100" type="number"></div><div data-ng-messages="publicationForm.$submitted && publicationForm.quantity.$error" class="help-block"><div data-ng-message="required">- The <b>quantity</b> is required.</div></div></div></div></div><!-- Warranty input - only if the publications type is: ['Marketplace']  --><div ng-if="publication.model.department === 'Marketplace'" ng-controller="MarketplacePublicationController"><div class="form-group"><label class="control-label"><span class="glyphicon glyphicon-certificate"></span> Warranty <sup class="required">*</sup></label><textarea redactor name="htmlWarranty" data-ng-model="publication.model.htmlWarranty" required class="form-control" placeholder=""></textarea><div data-ng-messages="publicationForm.$submitted && publicationForm.htmlWarranty.$error" class="help-block"><div data-ng-message="required">- The <b>Warranty</b> is required.</div></div></div></div><!-- Location input  --><div id="location-input"><hr class="hr-xs"><label class="control-label"><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> Location <sup class="required">*</sup></label><div class="list-group"><button type="button" class="list-group-item" ng-click="setLocation(location.$id); publication.redefineLocation = false;" ng-repeat="location in publication.locations | filter:{parentId: publication.model.locationId}:true"><span style="color: #286090" class="glyphicon glyphicon-folder-close"></span> <span ng-bind="location.name | capitalizeFirstChar"></span></button></div><ol ng-show="publication.locationPath.length > 0" class="breadcrumb"><li ng-click="publication.model.locationId = ''; publication.locationPath =[];" class="a-link">Reset</li><li ng-repeat="location in publication.locationPath" ng-click="setLocation(location.$id)" ng-class="{'a-link': !$last}"><span ng-bind="location.name | capitalizeFirstChar"></span></li></ol><input name="location" ng-model="publication.model.locationId" required class="form-control" placeholder="" type="text" style="display: none"><div data-ng-messages="publicationForm.$submitted && publicationForm.location.$error" class="help-block"><div data-ng-message="required">- The <b>Location</b> is required.</div></div><div ng-show="publication.redefineLocation === true" class="alert alert-danger alert-xs" role="alert"><b>NOTE: Sorry, but we need to redefine the location.</b></div><div class="alert alert-info alert-xs" style="margin-bottom: 0" role="alert">NOTE: Select the <b>location</b> that best suits to the publication. No matter if it is too general or specific, the important thing is to select one.</div></div><!-- Job type select - only if the publications type is: ['Marketplace'] --><div ng-if="publication.model.department === 'Jobs'"><hr class="hr-xs"><div class="row"><div class="col-xs-12 col-sm-12 col-md-5"><label for="jobType"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Job type</label><select id="jobType" name="jobType" class="form-control" ng-options="o as o for o in ['Permanent','Contract']" ng-model="publication.model.jobType" required><option value="">-- Choose an option --</option></select><div data-ng-messages="publicationForm.$submitted && publicationForm.jobType.$error" class="help-block"><div data-ng-message="required">- The <b>Job type</b> is required.</div></div></div></div></div><!-- salary input - only if the publications type is: ['Jobs'] --><div ng-if="publication.model.department === 'Jobs'" ng-controller="JobsPublicationController"><hr class="hr-xs"><div class="row"><div class="col-xs-12 col-sm-12 col-md-5"><label for="jobSalaryType"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Salary type</label><select id="jobSalaryType" name="jobSalaryType" class="form-control" ng-options="o as o for o in ['Annual','Daily','Hourly']" ng-model="publication.model.jobSalaryType" required><option value="">-- Choose an option --</option></select><div data-ng-messages="publicationForm.$submitted && publicationForm.jobSalaryType.$error" class="help-block"><div data-ng-message="required">- The <b>Salary type</b> is required.</div></div><label><span class="glyphicon glyphicon-gbp"></span> From:</label><div class="form-group"><input name="jobSalaryStartAt" ng-model="publication.model.jobSalaryStartAt" required class="form-control" placeholder="<Base salary or start at>" type="number"></div><div data-ng-messages="(publicationForm.$submitted && publicationForm.jobSalaryStartAt.$error) || (publicationForm.jobSalaryStartAt.$dirty && publicationForm.jobSalaryStartAt.$error)" class="help-block"><div data-ng-message="required">- The <b>start or base salary</b> is required.</div></div><label><span class="glyphicon glyphicon-gbp"></span> To:</label><div class="form-group"><input name="jobSalaryEndAt" ng-model="publication.model.jobSalaryEndAt" required class="form-control" placeholder="<End at>" type="number"></div><div data-ng-messages="(publicationForm.$submitted && publicationForm.jobSalaryEndAt.$error) || (publicationForm.jobSalaryEndAt.$dirty && publicationForm.jobSalaryEndAt.$error)" class="help-block"><div data-ng-message="required">- The <b>max salary</b> is required.</div></div><div class="checkbox"><label><input ng-model="publication.model.jobHasBonus" type="checkbox"> The job Has Bonus?</label></div><div class="checkbox" style="margin-bottom: 0"><label><input ng-model="publication.model.jobHasBenefits" type="checkbox"> The job Has Benefits?</label></div></div></div></div><!-- Recruiter type select - only if the publications type is: ['Jobs'] --><div ng-if="publication.model.department === 'Jobs'"><hr class="hr-xs"><div class="row"><div class="col-xs-12 col-sm-12 col-md-5"><label for="jobRecruiterType"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Recruiter type</label><select id="jobRecruiterType" name="jobRecruiterType" class="form-control" ng-options="o as o for o in ['Agency','Direct Employer']" ng-model="publication.model.jobType" required><option value="">-- Choose an option --</option></select><div data-ng-messages="publicationForm.$submitted && publicationForm.jobRecruiterType.$error" class="help-block"><div data-ng-message="required">- The <b>Recruiter type</b> is required.</div></div></div></div></div><!-- Home Status select - only if the publications type is: ['Real Estate'] --><div ng-if="publication.model.department === 'Real Estate'"><hr class="hr-xs"><div class="row"><div class="col-xs-12 col-sm-12 col-md-5"><label for="reHomeStatus"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Home status</label><select id="reHomeStatus" name="reHomeStatus" class="form-control" ng-options="o as o for o in ['New','Refurbished','Used']" ng-model="publication.model.reHomeStatus" required><option value="">-- Choose an option --</option></select><div data-ng-messages="publicationForm.$submitted && publicationForm.reHomeStatus.$error" class="help-block"><div data-ng-message="required">- The <b>Home status</b> is required.</div></div></div></div></div><!-- Home For select - only if the publications type is: ['Real Estate'] --><div ng-if="publication.model.department === 'Real Estate'"><hr class="hr-xs"><div class="row"><div class="col-xs-12 col-sm-12 col-md-5"><label for="reHomeFor"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Home for</label><select id="reHomeFor" name="reHomeFor" class="form-control" ng-options="o as o for o in ['Sale','Rent']" ng-model="publication.model.reHomeFor" required><option value="">-- Choose an option --</option></select><div data-ng-messages="publicationForm.$submitted && publicationForm.reHomeFor.$error" class="help-block"><div data-ng-message="required">- The <b>Home for</b> is required.</div></div></div></div></div></div><!-- End form inputs --><hr class="hr-xs"><upload-images form-name="publicationForm" http-request-promise="httpRequestPromise" images="publication.images" images-tag="publication.$id" images-path="'publications/' + publication.$id + '/images'" featured-image-id="publication.model.featuredImageId" featured-image-path="'publications/'+ publication.$id" featured-image-name="'featuredImageId'"></upload-images></form><hr class="hr-xs"><div class="alert alert-info alert-xs" style="margin-bottom: 0" role="alert">NOTE: This superscript <sup class="required">*</sup> mean that, is required.</div></div></div></div></div><update-title title="{{SITE_TITLE}}"></update-title><script src="static/plugins/redactor/redactor.min.js"></script>