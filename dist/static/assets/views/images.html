<script type="text/ng-template" id="images.html"></script><section><hr class="hr-xs"><!--<pre>{{formName.files | json}}</pre>--> <button class="btn btn-primary" ngf-select data-ng-model="images" name="files" data-ngf-multiple="true" data-accept="image/*" data-ngf-keep="true" data-ngf-keep-distinct="true" data-ngf-validate="{size: {max: '10MB'}, width: {min: 500, max:5000}, height: {min: 500, max: 5000}}" data-ngf-validate-force="true" required><i class="fa fa-picture-o"></i> Select the images</button> <button ng-show="imagesInfo().inQueue > 0" type="button" class="btn btn-danger" ng-click="removeAllQueueFiles()"><span class="glyphicon glyphicon-trash"></span> Remove in queue</button> <button ng-show="imagesInfo().inServer > 0" type="button" class="btn btn-danger" ng-click="deleteAllPublicationImages()"><span class="glyphicon glyphicon-trash"></span> Remove in server</button> <button ng-show="imagesInfo().invalid > 0" type="button" class="btn btn-danger" ng-click="removeInvalidFiles()"><span class="glyphicon glyphicon-trash"></span> Remove invalid</button><div data-ng-messages="formName.$submitted && formName.files.$error" class="help-block"><div data-ng-message="required">- The <b>Images</b> are required.</div></div><div data-ng-messages="formName.files.$error" class="help-block"><div data-ng-message="minHeight">- Some image(s) not meet the minimum specs.</div><div data-ng-message="maxHeight">- Some image(s) not meet the minimum specs.</div><div data-ng-message="minWidth">- Some image(s) not meet the minimum specs.</div><div data-ng-message="maxWidth">- Some image(s) not meet the minimum specs.</div><div data-ng-message="maxSize">- Some image(s) exceeds the Maximum Size of 10MB.</div></div><div ng-show="images.length > 0"><ul class="list-group" style="margin-bottom: 10px"><li class="list-group-item"><span class="badge">{{imagesInfo().inQueue}}</span> Images in queue to upload:</li><li class="list-group-item"><span class="badge">{{imagesInfo().inServer}}</span> Images in server:</li><li class="list-group-item"><span class="badge">{{imagesInfo().invalid}}</span> Images invalid:</li></ul><hr class="hr-xs"><!--<pre>{{images | json}}</pre>--><div class="panel panel-default" ng-repeat="(key, value) in images" style="margin-bottom: 10px"><div class="panel-body" style="padding: 5px"><div class="row"><div class="col-xs-4 col-md-2" style="padding-right: 5px"><div ng-switch="value.blobUrl !== undefined"><div ng-switch-when="true"><img class="img-thumbnail img-preview img-responsive" ng-src="{{value.blobUrl || 'assets/images/loading.jpeg'}}" alt="{{value.name}}"></div><div ng-switch-when="false"><div ng-if="value.$error !== undefined"><img class="img-thumbnail img-preview img-responsive" ng-src="assets/images/invalid_image.png" alt="{{value.name}}"></div><div ng-if="value.$id !== undefined"><cl-image public-id="{{value.$id}}" class="inline img-thumbnail img-preview img-responsive" format="jpg"><cl-transformation height="120" width="160" crop="fill"></cl-image></div></div></div><!-- this is the new version, but is exist a bug, the view and the model are not updating like expected, the form remain invalid--><!--<div ng-switch="value.$ngfBlobUrl !== undefined">--><!--<div ng-switch-when="true">--><!--<img class="img-thumbnail img-preview img-responsive" ng-src="{{value.$ngfBlobUrl || 'assets/images/loading.jpeg'}}" alt="{{value.name}}">--><!--</div>--><!--<div ng-switch-when="false">--><!--<cl-image public-id="{{value.$id}}" class="inline img-thumbnail img-preview img-responsive" format="jpg">--><!--<cl-transformation height="120" width="160" crop="fill"/>--><!--</cl-image>--><!--</div>--><!--</div>--><div style="margin-bottom: 5px"><span class="label label-default" ng-class="{'label-primary':(value.inServer)}">{{value.inServer ? 'In server' : 'In queue' }}</span></div><div style="margin-bottom: 5px"><span ng-show="model.featuredImageId === value.$id" class="label label-info">Primary image</span></div></div><div class="col-xs-8 col-md-10" style="padding-left: 5px"><div class="file-name">{{value.name}}</div><hr style="margin-top: 5px; margin-bottom: 5px"><div><!--<pre>{{value}}</pre>--><div ng-show="!value.$error"><div><b>Size:</b>{{value.size | bytes}}</div><uib-progressbar ng-show="value.addedDate === undefined" class="progress-striped active" value="value.progress ? value.progress : 0" type="{{  value.progress < 100 ? 'info' : 'success' }}">{{value.progress}}%</uib-progressbar></div><div ng-show="value.$error" class="bg-warning" style="padding: 7px"><h3 class="text-warning" style="margin-bottom: 0; margin-top: 4px">Invalid image</h3><div style="margin-bottom: 3px"><b>Reason:</b> <span ng-switch="value.$error"><span ng-switch-when="minHeight">Does not meet the minimum height of 500px.</span> <span ng-switch-when="maxHeight">Does not meet the maximum height of 5000px.</span> <span ng-switch-when="minWidth">Does not meet the minimum width of 500px.</span> <span ng-switch-when="maxWidth">Does not meet the maximum width of 5000px.</span> <span ng-switch-when="maxSize">Exceeds the Maximum Size of 10MB.</span> <span ng-switch-default>Undefined</span></span></div><div style="margin-bottom: 3px"><b>Size:</b> {{value.size | bytes}}</div></div></div></div></div></div><div class="panel-footer" style="padding: 5px; text-align: right"><button ng-show="value.inServer && model.featuredImageId !== value.$id && imagesInfo().inServer > 1" type="button" class="btn btn-primary btn-xs" ng-click="setAsPrimaryImage(value.$id)"><i class="fa fa-thumb-tack"></i> Set as featured Image</button> <button type="button" class="btn btn-danger btn-xs" ng-click="removeFile(key,value)"><span class="glyphicon glyphicon-trash"></span> Remove</button></div></div></div></section>